syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.datarango.grpc.badge";

package badge;

import "user.proto";

service BadgeService {
  rpc CreateBadge(CreateBadgeRequest) returns (Badge);
  rpc GetBadge(GetBadgeRequest) returns (Badge);
  rpc UpdateBadge(UpdateBadgeRequest) returns (Badge);
  rpc DeleteBadge(DeleteBadgeRequest) returns (DeleteBadgeResponse);
  rpc ListBadges(ListBadgesRequest) returns (ListBadgesResponse);
  rpc AwardBadge(AwardBadgeRequest) returns (AwardBadgeResponse);
}

message Badge {
  string id  = 1;
  string name = 2;
  int64 level = 3;
  int64 earned_at = 4;
  string description = 5;
  string image_url = 6;
  int64 xp_value = 7;
  User created_by = 8;
  int64 created_at = 9;
  int64 updated_at = 10;
}

message CreateBadgeRequest {
  string name = 1;
  string description = 2;
  string image_url = 3;
  int64 xp_value = 4;
}

message GetBadgeRequest {
  string id = 1;
}

message UpdateBadgeRequest {
  string id = 1;
  string name = 2;
  string description = 3;
  string image_url = 4;
  int64 xp_value = 5;
}

message DeleteBadgeRequest {
  string id = 1;
}

message DeleteBadgeResponse {
  bool success = 1;
}

message ListBadgesRequest {
  int32 page = 1;
  int32 size = 2;
}

message ListBadgesResponse {
  repeated Badge badges = 1;
  int32 total_count = 2;
  int32 page = 3;
  int32 size = 4;
}

message AwardBadgeRequest {
  string badge_id = 1;
  string user_id = 2;
}

message AwardBadgeResponse {
  bool success = 1;
  string message = 2;
}